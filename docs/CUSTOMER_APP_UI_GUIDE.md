# 고객 앱 UI 및 작동 가이드 📱

## 📋 목차
1. [개요](#개요)
2. [로그인 시스템](#로그인-시스템)
3. [메인 대시보드](#메인-대시보드)
4. [음식 기록 시스템](#음식-기록-시스템)
5. [상담 기록 조회](#상담-기록-조회)
6. [생활 기록](#생활-기록)
7. [UI/UX 특징](#uiux-특징)
8. [사용자 플로우](#사용자-플로우)

---

## 개요

**명성약국 고객 앱**은 고객들이 스마트폰을 통해 자신의 상담 기록을 조회하고, 일상의 식단과 생활 패턴을 기록할 수 있는 모바일 최적화 웹 애플리케이션입니다.

### 핵심 기능
- 🔐 **PIN 기반 간편 로그인** - 6자리 PIN으로 안전한 인증
- 📝 **상담 기록 조회** - 과거 상담 내역과 처방 정보 확인
- 🍽️ **AI 음식 분석** - Gemini AI를 활용한 자동 음식 인식
- 📊 **생활 패턴 기록** - 수면, 운동, 복약 등 건강 관리

### 기술 스택
- **프론트엔드**: Next.js 15 + React 19 + Tailwind CSS
- **백엔드**: Supabase (PostgreSQL + Storage)
- **AI**: Google Gemini AI
- **디자인**: 모바일 우선 반응형 디자인

---

## 로그인 시스템

### 접근 경로
- URL: `/customer`
- 자동으로 로그인 페이지(`/customer/login`)로 리디렉션

### 인증 방식 [[memory:6810559]]
고객은 **이름 + 6자리 PIN 코드** 조합으로 로그인합니다.
- PIN 코드는 고유하지 않으며, 기본값은 '000000'입니다.
- 초기 PIN 사용 시 PIN 변경 페이지로 자동 이동됩니다.

### UI 구성

```
┌─────────────────────────────────┐
│           🏥 명성약국            │
│        고객 전용 서비스          │
├─────────────────────────────────┤
│  [고객명 입력창]                │
│  placeholder: "홍길동"          │
├─────────────────────────────────┤
│  [PIN 입력창]                   │
│  ● ● ● ● ● ●                    │
│  (6자리 숫자, 마스킹 처리)        │
├─────────────────────────────────┤
│  초기 PIN: 000000               │
│  (첫 로그인 후 변경)             │
├─────────────────────────────────┤
│       [로그인 버튼]              │
└─────────────────────────────────┘
```

### 로그인 프로세스
1. **고객명 입력** - 정확한 이름 입력
2. **PIN 입력** - 6자리 숫자 입력 (자동 마스킹)
3. **인증 처리** - 서버에서 고객명+PIN 조합 검증
4. **세션 생성** - 로컬 스토리지에 세션 정보 저장
5. **대시보드 이동** - 인증 성공 시 메인 화면으로 이동

---

## 메인 대시보드

고객이 로그인 후 가장 먼저 보는 화면으로, 주요 기능에 쉽게 접근할 수 있도록 설계되었습니다.

### 헤더 영역
```
┌─────────────────────────────────┐
│ 안녕하세요, [고객명]님           │
│ 고객번호: [고객코드]      PIN변경 │로그아웃
└─────────────────────────────────┘
```

### 메인 메뉴 (2x1 그리드)
```
┌─────────────────┬─────────────────┐
│ 🍽️ 음식 기록    │ 📝 생활 기록    │
│ 식단 사진 촬영   │ 수면, 운동, 복약 │
└─────────────────┴─────────────────┘
```

### 최근 상담 기록 섹션
- **제목**: "최근 상담 기록"
- **표시 개수**: 최신 3개 상담만 표시
- **각 상담 카드 구성**:
  - 상담 날짜 (YYYY년 MM월 DD일 형식)
  - 호소증상 (2줄 제한, 말줄임표 처리)
  - 상담 결과 (50자 제한, 파란색 텍스트)
  - 우측 화살표 아이콘

### 빠른 액션 버튼 (3x1 그리드)
```
┌─────────┬─────────┬─────────┐
│ 📷      │ 😴      │ 💊      │
│ 음식촬영 │ 수면기록 │ 복약기록 │
└─────────┴─────────┴─────────┘
```

---

## 음식 기록 시스템

AI를 활용하여 음식 사진을 자동으로 분석하고 영양 정보를 제공하는 핵심 기능입니다.

### 메인 화면 (`/customer/food-diary`)

#### 상단 네비게이션
```
[← 뒤로가기]    음식 기록    [촬영 버튼]
```

#### 날짜 선택기
- **타입**: HTML5 date input
- **제한**: 오늘 날짜까지만 선택 가능
- **동작**: 날짜 변경 시 해당 날짜 기록 자동 로드

#### 빠른 액션 메뉴 (4x1 그리드)
```
┌──────┬──────┬──────┬──────┐
│ 📷   │ ✏️   │ 📊   │ 📅   │
│ 촬영  │ 수동  │ 통계  │ 달력  │
└──────┴──────┴──────┴──────┘
```

#### 식사별 기록 목록
음식 기록은 **아침 → 점심 → 저녁 → 간식** 순서로 그룹화되어 표시됩니다.

**각 그룹 헤더**:
```
┌─────────────────────────────────┐
│ 아침                    [3개]   │
└─────────────────────────────────┘
```

**개별 음식 카드**:
```
┌─────────────────────────────────┐
│ [이미지] 음식명                  │
│ 64x64   카테고리                │
│         HH:MM • 신뢰도 XX%    → │
└─────────────────────────────────┘
```

### 카메라 촬영 화면 (`/customer/food-diary/camera`)

#### 촬영 인터페이스
- **실시간 카메라 뷰**: 전체 화면 카메라 스트림
- **촬영 버튼**: 하단 중앙의 큰 원형 버튼
- **갤러리 선택**: 갤러리에서 기존 사진 선택 옵션
- **카메라 전환**: 전면/후면 카메라 전환 기능

#### AI 분석 프로세스
1. **사진 촬영/선택** → 이미지 미리보기
2. **"AI로 음식 분석하기"** 버튼 클릭
3. **분석 중 로딩** → 스피너와 "분석 중..." 메시지
4. **결과 표시** → 음식명, 카테고리, 영양 정보

#### 결과 저장 화면
```
┌─────────────────────────────────┐
│ [촬영한 음식 이미지]             │
├─────────────────────────────────┤
│ 음식명: [AI 분석 결과]           │
│ 카테고리: [분류]                │
│ 신뢰도: XX%                     │
├─────────────────────────────────┤
│ 식사 종류: [아침▼]              │
│ 개인 메모: [선택적 입력]         │
├─────────────────────────────────┤
│ [저장] [다시 촬영]              │
└─────────────────────────────────┘
```

---

## 상담 기록 조회

고객이 자신의 과거 상담 내역을 확인할 수 있는 기능입니다.

### 대시보드 상담 목록
- **표시 개수**: 최신 3개 상담
- **더보기**: "모든 상담 기록 보기 →" 링크

### 상담 상세 화면 (`/customer/consultation/[id]`)
```
┌─────────────────────────────────┐
│ [← 뒤로]  상담 상세 정보         │
├─────────────────────────────────┤
│ 📅 상담일: YYYY년 MM월 DD일      │
├─────────────────────────────────┤
│ 🏥 호소증상                     │
│ [상담 시 고객이 호소한 증상]     │
├─────────────────────────────────┤
│ 💡 상담 결과                    │
│ [약사의 상담 및 처방 내용]       │
├─────────────────────────────────┤
│ 💊 처방 약물                    │
│ [처방된 약물 정보]              │
├─────────────────────────────────┤
│ 📷 상담 사진                    │
│ [이미지 갤러리]                 │
└─────────────────────────────────┘
```

### 이미지 갤러리
- **썸네일 표시**: 작은 이미지들을 그리드로 표시
- **확대 보기**: 이미지 클릭 시 전체화면 모달
- **네비게이션**: 좌우 스와이프로 이미지간 이동

---

## 생활 기록

고객의 일상 생활 패턴을 기록하는 기능입니다. (기본 구조만 구현됨)

### 메인 화면 (`/customer/lifestyle`)
```
┌─────────────────────────────────┐
│ [← 뒤로]    생활 기록            │
├─────────────────────────────────┤
│ 📅 오늘 날짜                    │
├─────────────────────────────────┤
│ 💤 수면 기록                    │
│ [취침시간] ~ [기상시간]          │
├─────────────────────────────────┤
│ 🏃 운동 기록                    │
│ [운동 종류] [시간]              │
├─────────────────────────────────┤
│ 💊 복약 기록                    │
│ [복용 약물] [복용 시간]          │
├─────────────────────────────────┤
│ [저장하기]                      │
└─────────────────────────────────┘
```

---

## UI/UX 특징

### 모바일 최적화 디자인
- **터치 친화적**: 충분한 터치 영역 (최소 44px)
- **단순한 네비게이션**: 깊이 3레벨 이하 구조
- **직관적 아이콘**: 이모지 기반 시각적 표현

### 색상 시스템
- **주 색상**: 인디고 계열 (`indigo-600`, `blue-600`)
- **음식 기록**: 초록 계열 (`green-600`)
- **상담 기록**: 파란 계열 (`blue-600`)
- **경고/삭제**: 빨간 계열 (`red-600`)

### 일관된 디자인 패턴
```css
/* 카드 스타일 */
.card {
  background: white;
  border-radius: 8px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
  padding: 1.5rem;
}

/* 버튼 스타일 */
.button-primary {
  background: #4f46e5;
  color: white;
  padding: 0.75rem 1.5rem;
  border-radius: 6px;
}
```

### 반응형 그리드
- **2열 그리드**: 메인 메뉴
- **3열 그리드**: 빠른 액션
- **4열 그리드**: 음식 기록 액션

---

## 사용자 플로우

### 첫 방문 고객
```
방문 → 로그인 페이지 → 이름+PIN 입력 → 
(초기PIN인 경우) PIN 변경 → 대시보드
```

### 기존 고객
```
방문 → 로그인 페이지 → 이름+PIN 입력 → 대시보드
```

### 음식 기록 플로우
```
대시보드 → 음식 기록 → 카메라 촬영 → 
AI 분석 → 결과 확인/수정 → 저장 → 기록 목록
```

### 상담 조회 플로우
```
대시보드 → 상담 카드 클릭 → 상담 상세 → 
이미지 확대 → 뒤로가기
```

### 로그아웃 플로우
```
대시보드 → 로그아웃 버튼 → 
세션 삭제 → 로그인 페이지
```

---

## 접근성 및 사용성

### 접근성 고려사항
- **키보드 네비게이션**: Tab 키로 이동 가능
- **스크린 리더**: 적절한 alt 텍스트와 레이블
- **색상 대비**: WCAG 2.1 AA 등급 준수
- **텍스트 크기**: 최소 16px 이상

### 오프라인 대응
- **네트워크 오류**: 친화적인 에러 메시지
- **재시도 옵션**: 실패한 작업 재시도 가능
- **로컬 캐시**: 세션 정보 로컬 저장

### 성능 최적화
- **이미지 최적화**: Next.js Image 컴포넌트 사용
- **지연 로딩**: 스크롤 시 콘텐츠 로드
- **압축**: Gzip 압축 적용

---

## 보안 및 개인정보 보호

### 인증 보안
- **PIN 마스킹**: 입력 시 • 문자로 표시
- **세션 만료**: 일정 시간 후 자동 로그아웃
- **HTTPS 필수**: 모든 통신 암호화

### 개인정보 처리
- **최소 수집**: 필수 정보만 수집
- **로컬 저장**: 민감 정보는 서버에만 저장
- **접근 제한**: 본인 데이터만 접근 가능

---

**🏥 명성약국 고객 앱 UI 가이드 v1.0**  
*고객 중심의 직관적이고 안전한 디지털 헬스케어 서비스*
