# ìŠ¤ë§ˆíŠ¸ AI ì§ˆë¬¸ ì‹œìŠ¤í…œ ê°€ì´ë“œ ðŸ§ 

## ðŸŽ¯ ê°œì„ ëœ ì‹œìŠ¤í…œ ê°œìš”

ê¸°ì¡´ì˜ **ê³ ì •ëœ ì§ˆë¬¸ ë°©ì‹**ì—ì„œ **AIê°€ ìƒí™©ì„ íŒë‹¨í•´ì„œ í•„ìš”í•œ ì§ˆë¬¸ë§Œ ë™ì ìœ¼ë¡œ ìƒì„±**í•˜ëŠ” ìŠ¤ë§ˆíŠ¸ ì‹œìŠ¤í…œìœ¼ë¡œ ì™„ì „ížˆ ê°œì„ í–ˆìŠµë‹ˆë‹¤.

### ðŸ”„ Before vs After

| êµ¬ë¶„ | ê¸°ì¡´ ì‹œìŠ¤í…œ | ìƒˆë¡œìš´ ìŠ¤ë§ˆíŠ¸ ì‹œìŠ¤í…œ |
|------|------------|-------------------|
| **ì§ˆë¬¸ ë°©ì‹** | í•­ìƒ ê³ ì •ëœ 3-4ê°œ ì§ˆë¬¸ | ìƒí™©ë³„ 0-2ê°œ í•„ìš”í•œ ì§ˆë¬¸ë§Œ |
| **ì„­ì·¨ëŸ‰** | í•­ìƒ 4ë‹¨ê³„ ì„ íƒ ì§ˆë¬¸ | ë‹¤ ë¨¹ì€ ê²Œ í™•ì‹¤í•˜ë©´ ì§ˆë¬¸ ìƒëžµ |
| **ì„­ì·¨ ì‹œê°„** | í•­ìƒ ì‹œê°„ ì„ íƒ ì§ˆë¬¸ | ì‹¤ì‹œê°„ ì´¬ì˜ì´ë©´ ì§ˆë¬¸ ìƒëžµ |
| **ì‹ì‚¬ êµ¬ë¶„** | ì‚¬ìš©ìžê°€ ì§ì ‘ ì„ íƒ | ì‹œê°„ëŒ€ ê¸°ë°˜ ìžë™ ê²°ì • |
| **ìŒì‹ëª…** | ì‹ ë¢°ë„ ë‚®ì„ ë•Œë§Œ í™•ì¸ | AI í™•ì‹ ë„ì— ë”°ë¼ ë™ì  ê²°ì • |

---

## ðŸ§  AI íŒë‹¨ ê¸°ì¤€

### 1. ì„­ì·¨ëŸ‰ íŒë‹¨
```
âœ… ì§ˆë¬¸ ìƒëžµ ì¡°ê±´:
- ì ‘ì‹œê°€ ê¹¨ë—í•˜ê³  ìž”ì—¬ë¬¼ì´ ê±°ì˜ ì—†ìŒ
- ì†ŒëŸ‰ í¬ìž¥ ìŒì‹ (ê³¼ìž, ìŒë£Œ, ê°œë³„ í¬ìž¥)
- "appears_finished": true + "portion_clarity": "ëª…í™•í•¨"

â“ ì§ˆë¬¸ í¬í•¨ ì¡°ê±´:
- ëŒ€ëŸ‰ ìŒì‹ì—ì„œ ì¼ë¶€ë§Œ ë¨¹ì€ í”ì 
- ì—¬ëŸ¬ ê°œ ì¤‘ ëª‡ ê°œ ë¨¹ì—ˆëŠ”ì§€ ë¶ˆë¶„ëª…
- "portion_clarity": "ì• ë§¤í•¨"
```

### 2. ì„­ì·¨ ì‹œê°„ íŒë‹¨
```
âœ… ì§ˆë¬¸ ìƒëžµ ì¡°ê±´:
- ì‹¤ì‹œê°„ ì¹´ë©”ë¼ ì´¬ì˜ (eating_context: "ì‹ì‚¬ì¤‘")
- ì¤€ë¹„ëœ ìŒì‹ ìƒíƒœ (eating_context: "ì¤€ë¹„ëœìŒì‹")
- capturedAtì´ í˜„ìž¬ ì‹œê°„ê³¼ 5ë¶„ ì´ë‚´

â“ ì§ˆë¬¸ í¬í•¨ ì¡°ê±´:
- ê°¤ëŸ¬ë¦¬ì—ì„œ ì„ íƒí•œ ì‚¬ì§„
- ì´ë¯¸ ë¨¹ì€ í”ì  (eating_context: "ì‹ì‚¬ì™„ë£Œ")
- ì‹œê°„ ì •ë³´ê°€ ë¶ˆë¶„ëª…í•œ ê²½ìš°
```

### 3. ìŒì‹ëª… í™•ì¸
```
âœ… ì§ˆë¬¸ ìƒëžµ ì¡°ê±´:
- AI í™•ì‹ ë„ 80% ì´ìƒ (confidence > 0.8)
- ëª…í™•í•œ ìŒì‹ í˜•íƒœì™€ íŠ¹ì§•

â“ ì§ˆë¬¸ í¬í•¨ ì¡°ê±´:
- AI í™•ì‹ ë„ 80% ë¯¸ë§Œ
- ì—¬ëŸ¬ ìŒì‹ì´ ì„žì—¬ ìžˆìŒ
- ëª¨í˜¸í•œ í˜•íƒœë‚˜ ê°ë„
```

---

## ðŸ¤– Gemini AI í”„ë¡¬í”„íŠ¸ êµ¬ì¡°

### ìƒˆë¡œìš´ ë¶„ì„ ìš”ì†Œë“¤

```json
{
  "analysis_context": {
    "appears_finished": true,        // ë‹¤ ë¨¹ì€ ê²ƒì²˜ëŸ¼ ë³´ì´ëŠ”ê°€?
    "portion_clarity": "ëª…í™•í•¨",     // ì„­ì·¨ëŸ‰ì´ ëª…í™•í•œê°€?
    "multiple_items": false,         // ì—¬ëŸ¬ ìŒì‹ì´ ìžˆëŠ”ê°€?
    "eating_context": "ì‹ì‚¬ì™„ë£Œ"     // ì‹ì‚¬ ìƒí™©ì€?
  },
  "smart_questions": [
    {
      "id": "portion_check",
      "question": "ì´ ì •ë„ ì–‘ì„ ë“œì‹  ê²Œ ë§žë‚˜ìš”?",
      "reason": "ì ‘ì‹œê°€ ê¹¨ë—í•´ì„œ ë‹¤ ë“œì‹  ê²ƒ ê°™ì§€ë§Œ í™•ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤",
      "skip_if": "appears_finished === true && portion_clarity === 'ëª…í™•í•¨'"
    }
  ]
}
```

### ë™ì  ì§ˆë¬¸ ìƒì„± ë¡œì§

```javascript
// 1. skip_if ì¡°ê±´ í‰ê°€
if (confidence > 0.8) {
  // ìŒì‹ëª… í™•ì¸ ì§ˆë¬¸ ìŠ¤í‚µ
}

if (appears_finished && portion_clarity === 'ëª…í™•í•¨') {
  // ì„­ì·¨ëŸ‰ ì§ˆë¬¸ ìŠ¤í‚µ  
}

if (eating_context === 'ì‹ì‚¬ì¤‘') {
  // ì„­ì·¨ ì‹œê°„ ì§ˆë¬¸ ìŠ¤í‚µ
}
```

---

## ðŸ“Š ì‹¤ì œ ì‹œë‚˜ë¦¬ì˜¤ ì˜ˆì‹œ

### ì‹œë‚˜ë¦¬ì˜¤ 1: ì™„ë²½í•œ ìƒí™© (ì§ˆë¬¸ 0ê°œ)
```
ìƒí™©: ë¼ë©´ í•œ ê·¸ë¦‡ì„ ë‹¤ ë¨¹ê³  ë¹ˆ ê·¸ë¦‡ ì´¬ì˜
AI ë¶„ì„:
- food_name: "ë¼ë©´" (confidence: 0.9)
- appears_finished: true
- portion_clarity: "ëª…í™•í•¨" 
- eating_context: "ì‹ì‚¬ì™„ë£Œ"

ê²°ê³¼: ì§ˆë¬¸ ì—†ì´ ë°”ë¡œ ì €ìž¥ âœ¨
```

### ì‹œë‚˜ë¦¬ì˜¤ 2: í™•ì¸ í•„ìš” (ì§ˆë¬¸ 1ê°œ)
```
ìƒí™©: ë³µìž¡í•œ ìƒëŸ¬ë“œ, AI í™•ì‹ ë„ ë‚®ìŒ
AI ë¶„ì„:
- food_name: "ê·¸ë¦°ìƒëŸ¬ë“œ" (confidence: 0.6)
- appears_finished: true
- portion_clarity: "ëª…í™•í•¨"

ì§ˆë¬¸: "ì´ ìŒì‹ì´ 'ê·¸ë¦°ìƒëŸ¬ë“œ'ê°€ ë§žë‚˜ìš”?" ë§Œ ì œì‹œ
```

### ì‹œë‚˜ë¦¬ì˜¤ 3: ì• ë§¤í•œ ìƒí™© (ì§ˆë¬¸ 2ê°œ)
```
ìƒí™©: í”¼ìž ì—¬ëŸ¬ ì¡°ê° ì¤‘ ì¼ë¶€ë§Œ ë¨¹ì€ ìƒíƒœ
AI ë¶„ì„:
- food_name: "íŽ˜í¼ë¡œë‹ˆ í”¼ìž" (confidence: 0.85)
- appears_finished: false
- portion_clarity: "ì• ë§¤í•¨"
- multiple_items: true

ì§ˆë¬¸:
1. "í”¼ìžë¥¼ ëª‡ ì¡°ê° ì •ë„ ë“œì…¨ë‚˜ìš”?"
2. (ì‹œê°„ì€ ìžë™ ì¶”ì •ìœ¼ë¡œ ìƒëžµ)
```

---

## ðŸŽ¨ ì‚¬ìš©ìž ê²½í—˜ ê°œì„ 

### 1. ê°„ì†Œí™”ëœ ì¸í„°íŽ˜ì´ìŠ¤
- **ì§ˆë¬¸ 0ê°œ**: ë°”ë¡œ ê²°ê³¼ í™”ë©´ìœ¼ë¡œ ì´ë™
- **ì§ˆë¬¸ 1-2ê°œ**: ê°„ë‹¨í•œ í™•ì¸ UI
- **ì§ˆë¬¸ 3ê°œ ì´ìƒ**: ê¸°ì¡´ ë‹¨ê³„ë³„ UI (ë“œë¬¼ê²Œ ë°œìƒ)

### 2. ì§„í–‰ë¥  í‘œì‹œ ê°œì„ 
```
ì§ˆë¬¸ ì ìŒ (â‰¤2ê°œ): "ðŸŽ¯ ìŠ¤ë§ˆíŠ¸ ë¶„ì„ ì™„ë£Œ"
ì§ˆë¬¸ ë§ŽìŒ (â‰¥3ê°œ): ê¸°ì¡´ ì§„í–‰ë¥  ë°” í‘œì‹œ
```

### 3. ì•ˆë‚´ ë©”ì‹œì§€ ê°œì„ 
```
ê¸°ì¡´: "AI ë¶„ì„ê³¼ ì§ˆë¬¸ ë‹µë³€ì„ í†µí•´..."
ê°œì„ : "AIê°€ ìƒí™©ì„ ì •í™•ížˆ íŒŒì•…í•´ì„œ í•„ìš”í•œ ì§ˆë¬¸ë§Œ Nê°œ ì¤€ë¹„í–ˆìŠµë‹ˆë‹¤"
```

---

## ðŸ”§ ê¸°ìˆ ì  êµ¬í˜„

### 1. ì¡°ê±´ í‰ê°€ ì—”ì§„
```javascript
function shouldSkipQuestion(smartQuestion, analysisResult, context) {
  const skipCondition = smartQuestion.skip_if;
  
  // "confidence > 0.8" íŒŒì‹±
  if (skipCondition.includes('confidence >')) {
    const threshold = parseFloat(skipCondition.match(/[\d.]+/)[0]);
    return analysisResult.confidence > threshold;
  }
  
  // "appears_finished === true" íŒŒì‹±
  if (skipCondition.includes('appears_finished === true')) {
    return context.appears_finished === true;
  }
  
  // ë³µí•© ì¡°ê±´ "A && B" íŒŒì‹±
  if (skipCondition.includes('&&')) {
    const conditions = skipCondition.split('&&');
    return conditions.every(condition => evaluateCondition(condition));
  }
}
```

### 2. ìžë™ ë°ì´í„° ì¶”ì •
```javascript
// ì„­ì·¨ëŸ‰ ìžë™ ì¶”ì •
let portionPercentage = 100; // ê¸°ë³¸ê°’

if (processedAnswers.portion_percentage) {
  portionPercentage = processedAnswers.portion_percentage;
} else if (analysisResult.analysis_context?.appears_finished) {
  portionPercentage = 100; // AIê°€ "ë‹¤ ë¨¹ìŒ"ìœ¼ë¡œ íŒë‹¨
} else if (analysisResult.analysis_context?.portion_clarity === 'ì• ë§¤í•¨') {
  portionPercentage = 75; // ì• ë§¤í•  ë•ŒëŠ” 75%ë¡œ ì¶”ì •
}

// ì‹ì‚¬ êµ¬ë¶„ ìžë™ ê²°ì •
function getMealTypeByTime(consumedTime) {
  const hour = consumedTime.getHours();
  if (hour >= 6 && hour < 10) return 'ì•„ì¹¨';
  if (hour >= 11 && hour < 15) return 'ì ì‹¬';
  if (hour >= 17 && hour < 21) return 'ì €ë…';
  return 'ê°„ì‹';
}
```

---

## ðŸ“ˆ ì˜ˆìƒ íš¨ê³¼

### 1. ì‚¬ìš©ìž íŽ¸ì˜ì„± í–¥ìƒ
- **ì§ˆë¬¸ ìˆ˜ ê°ì†Œ**: í‰ê·  3-4ê°œ â†’ 0-1ê°œ
- **ì™„ë£Œ ì‹œê°„ ë‹¨ì¶•**: 1-2ë¶„ â†’ 10-30ì´ˆ
- **ì‚¬ìš©ì„± ê°œì„ **: ë¶ˆí•„ìš”í•œ ì„ íƒ ì œê±°

### 2. ë°ì´í„° ì •í™•ë„ í–¥ìƒ
- **AI íŒë‹¨ í™œìš©**: 80% ì •í™•ë„ì˜ AI ë¶„ì„ ì ê·¹ í™œìš©
- **ìƒí™©ë³„ ìµœì í™”**: ê° ìƒí™©ì— ë§žëŠ” ì ì ˆí•œ ì¶”ì •
- **ìžì—°ìŠ¤ëŸ¬ìš´ ê¸°ë¡**: ì‹¤ì œ ì‹ì‚¬ íŒ¨í„´ê³¼ ì¼ì¹˜

### 3. ì‹œìŠ¤í…œ íš¨ìœ¨ì„±
- **ì„œë²„ ë¶€í•˜ ê°ì†Œ**: ì§ˆë¬¸-ë‹µë³€ ì„¸ì…˜ ë‹¨ì¶•
- **ì €ìž¥ ê³µê°„ ì ˆì•½**: ë¶ˆí•„ìš”í•œ ì¤‘ê°„ ë°ì´í„° ì œê±°
- **ì‘ë‹µ ì†ë„ í–¥ìƒ**: ì¦‰ì‹œ ì™„ë£Œ ê°€ëŠ¥í•œ ì¼€ì´ìŠ¤ ì¦ê°€

---

## ðŸ”„ í–¥í›„ ê°œì„  ë°©í–¥

### ë‹¨ê¸° ê°œì„  (1ê°œì›”)
- [ ] **í•™ìŠµ ê¸°ëŠ¥**: ê°œì¸ë³„ ì‹ìŠµê´€ íŒ¨í„´ í•™ìŠµ
- [ ] **ì •í™•ë„ í”¼ë“œë°±**: ì‚¬ìš©ìž ìˆ˜ì • ë‚´ì—­ì„ í†µí•œ AI ê°œì„ 
- [ ] **ìƒí™©ë³„ í…œí”Œë¦¿**: ìžì£¼ ë‚˜ì˜¤ëŠ” íŒ¨í„´ì˜ ì§ˆë¬¸ í…œí”Œë¦¿í™”

### ì¤‘ê¸° ê°œì„  (3ê°œì›”)
- [ ] **ìŒì„± ì‘ë‹µ**: ê°„ë‹¨í•œ ì§ˆë¬¸ì€ ìŒì„±ìœ¼ë¡œ ë‹µë³€
- [ ] **ì—°ì† ì´¬ì˜**: ì—¬ëŸ¬ ìŒì‹ì„ í•œ ë²ˆì— ì²˜ë¦¬
- [ ] **ì‹¤ì‹œê°„ ì œì•ˆ**: ì´¬ì˜ ì¤‘ ì‹¤ì‹œê°„ ê°€ì´ë“œ ì œê³µ

### ìž¥ê¸° ê°œì„  (6ê°œì›”)
- [ ] **ì™„ì „ ìžë™í™”**: 95% ì´ìƒ ì¼€ì´ìŠ¤ì—ì„œ ì§ˆë¬¸ ì—†ì´ ì²˜ë¦¬
- [ ] **ì˜ˆì¸¡ ë¶„ì„**: ì‹ìŠµê´€ íŒ¨í„´ ê¸°ë°˜ ê±´ê°• ì¡°ì–¸
- [ ] **í†µí•© ê´€ë¦¬**: ì•½ë¬¼, ìš´ë™ê³¼ ì—°ê³„í•œ ì¢…í•© ê±´ê°• ê´€ë¦¬

---

**ðŸ§  ìŠ¤ë§ˆíŠ¸ AI ì§ˆë¬¸ ì‹œìŠ¤í…œ v3.0**  
*í•„ìš”í•œ ê²ƒë§Œ, ì •í™•í•˜ê²Œ, ë¹ ë¥´ê²Œ*
